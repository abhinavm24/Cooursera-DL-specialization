(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+uTL":function(module,e,t){"use strict";t.d(e,"a",function(){return o}),t.d(e,"b",function(){return a}),t.d(e,"c",function(){return i});var r=t("HRhj"),n=t("sQ/U"),o=function getForumSubscription(e,t){return r.a.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t})},a=function subscribeUserToEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.subscribe(e,t)},i=function unsubscribeUserFromEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.unsubscribe(e,t)}},"45ES":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("17x9"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("wd/R"),u=t.n(c),l=t("F/us"),d=t.n(l),p=t("py0D"),m=t("9A5E"),h=t("8cuT"),b=t("eMx6"),f=t("8Hdl"),g=t("fAYU"),S=t("oEqI"),v=t("AeFk"),y=t("mpHW"),O=function styles(e){return Object(v.c)({padding:"24px 0",position:"relative",borderBottom:"1px solid ".concat(e.palette.gray[300]),"&:last-child":{borderBottom:"none"},"&.focused, &:hover, &.focused a":{textDecoration:"none"},".forReader":{height:0,width:0}})},I=function(e){function ThreadsListEntry(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={threadFocus:!1},t.handleThreadFocus=function(){t.setState({threadFocus:!0})},t.handleThreadBlur=function(){t.setState({threadFocus:!1})},t}var t;return n()(ThreadsListEntry,e),ThreadsListEntry.prototype.render=function render(){var e,t,r,n=this.props,o=n.entry,a=n.isPinned,i=n.isDeleted,s=n.isRead,c=n.threadUrl,l=n.viewCount,d=n.answerCount,h=n.badge,S=n.threadName,I=n.timestamp,j=n.questionId,x=n.questionUserId,F=this.state.threadFocus,T=void 0!==l&&!Number.isNaN(l),E=void 0!==d&&!Number.isNaN(d),w="".concat(a?"Pinned ":"","Thread: ").concat(S,", \n                          ").concat(u()(I).fromNow(),"\n                          ").concat(T?", ".concat(l," views"):""," \n                          ").concat(E?", ".concat(d," replies"):"");return Object(v.d)("li",{css:O(this.props.theme),className:"rc-personalization_DiscussionsBody_ThreadsListEntry ".concat(F?"focused":"blurred")},this.props.entry&&Object(v.d)(y.a,{title:this.props.entry.content.question,pinned:a,titleLink:c&&Object(v.d)(f.a,{variant:"h2semibold",className:"rc-personalization_ForumThreadCard__title"},Object(v.d)(g.a,{component:m.c,href:c,trackingName:"thread_list_entry","aria-label":w,data:{question_id:j,question_user_id:x}},this.props.entry.content.question))||void 0,threadUrl:c,description:Object(v.d)(b.a,{cml:null===(e=this.props)||void 0===e?void 0:null===(t=e.entry)||void 0===t?void 0:null===(r=t.content)||void 0===r?void 0:r.details,contentLineCountMax:2}),isUpvoted:this.props.entry.isUpvoted,upvoteCount:this.props.entry.upvoteCount,forumQuestionId:this.props.questionId,creator:this.props.entry.creator,createdAt:this.props.entry.createdAt,replyCount:this.props.answerCount,lastContributor:this.props.profile,lastReplyDate:this.props.timestamp,answerCount:this.props.answerCount,badge:h,isRead:s}),i&&Object(v.d)(p.a,{entry:o,hideUndoDelete:!0}))},ThreadsListEntry}(s.a.Component);I.contextTypes={executeAction:a.a.func.isRequired},I.defaultProps={isPinned:!1,isDeleted:!1,isRead:!0},e.a=d.a.compose(Object(h.a)(["CourseStore","ClassmatesProfileStore"],function(e,t){var r=e.CourseStore,n=e.ClassmatesProfileStore,o=t.profile;return{courseId:r.getCourseId(),fullProfile:d()(n.profiles).findWhere({externalId:o.externalUserId})}}))(Object(S.a)(I))},AZBp:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),o=t("VbXa"),a=t.n(o),i=t("VkAN"),s=t.n(i),c=t("AeFk"),u=t("kvW3"),l=t("oEt1"),d=t("eJMc"),p=t.n(d),m=t("17x9"),h=t.n(m),b=t("q1tI"),f=t.n(b),g=t("F/us"),S=t.n(g),v=t("JacN"),y=t("as3Y"),O=t("QXTe"),I=t("py0D"),j=t("u6zc"),x=t("T/K2"),F=t("abvH"),T=t("NMx/"),E=t("dJDe"),w=t("kRCD"),C=t("sWYI"),N=t("2BcA"),P=t("GqWO"),D=t("2xl4"),q=t("WE4C"),R=t("iaxl"),A=t("KRcl"),k=t("8cuT"),B=t("+LJP"),U=t("ii1C"),M=t("5+aF"),L=t("e8+g"),V=t("GP6s"),z=t.n(V),W=t("PDuk");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _templateObject(){var e=s()(["\n\t.back-area {\n\t\tmargin-right: ",";\n\t\t.back-arrow {\n\t\t\tpadding-left: ",";\n\t\t\tmargin-right: ",";\n\t\t\tmargin-bottom: 10px;\n\t\t\ttransition: all 0.1s ease-in-out;\n\t\t}\n\t\t&:hover {\n\t\t\t.back-arrow {\n\t\t\t\tpadding: ",";\n\t\t\t\ttransition: all 0.1s ease-in-out;\n\t\t\t}\n\t\t}\n\t}\n\t.discussion-content {\n\t\tmargin-top: 20px;\n\t\t.frost-container {\n\t\t\tposition: relative;\n\t\t}\n\t\th1 {\n\t\t\tmargin-top: 0;\n\t\t}\n\t}\n\t.mentor-message {\n\t\tline-height: 30px;\n\t\theight: 30px;\n\t\twidth: 100%;\n\t\tbackground-color: #ff0;\n\t\tborder: 1px solid #e5e600;\n\t}\n\t.sr-only {\n\t\tposition: absolute;\n\t\twidth: 1px;\n\t\theight: 1px;\n\t\tmargin: -1px;\n\t\tpadding: 0;\n\t\toverflow: hidden;\n\t\tclip: rect(0, 0, 0, 0);\n\t\tborder: 0;\n\t}\n\t.metadata {\n\t\tline-height: 18px;\n\t\t.rc-NextViewName {\n\t\t\tmargin-left: ",";\n\t\t}\n\t}\n\t.action-area {\n\t\tbutton {\n\t\t\tborder: none;\n\t\t\tbackground-color: inherit;\n\t\t\t&:hover {\n\t\t\t\tcolor: $color-primary;\n\t\t\t}\n\t\t}\n\t}\n\t.rc-CML {\n\t\tmargin: ",";\n\t}\n\t.rc-DetailedQuestion {\n\t\tmargin-top: ",";\n\t}\n\t.rc-HighlightedReply {\n\t\tmargin-top: ",";\n\t}\n\t.rc-RepliesList {\n\t\tmargin-top: ",";\n\t\tpadding: ",";\n\t}\n\t.reply-container {\n\t\tpadding: ",";\n\t\tmargin-top: 48px;\n\t\tborder-radius: 3px;\n\t\tbackground-color: #00f;\n\t\t.rc-ProfileArea {\n\t\t\tmargin: ",";\n\t\t}\n\t\t.rc-ReplyCML {\n\t\t\tflex: 1;\n\t\t}\n\t}\n\t.rc-ThreadSettings {\n\t\tmargin-bottom: 10px;\n\t}\n\n  @media {\n    $phone-or-smaller {\n      .rc-ThreadDetail .rc-DetailedQuestion {\n      padding: ",";\n    }\n  }\n\n"]);return _templateObject=function _templateObject(){return e},e}var G=function styles(e){return Object(c.c)(_templateObject(),e.spacing(8),e.spacing(4),e.spacing(4),e.spacing(0,4,0,0),e.spacing(4),e.spacing(8,0,16),e.spacing(24),e.spacing(24),e.spacing(24),e.spacing(0,0,24,0),e.spacing(12),e.spacing(4),e.spacing(24,12))},Q=N.d.limitPerPage,H=function(e){function ThreadDetail(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={canTeach:!1,inputClickCounter:0},t._isMounted=!1,t.fetchAnswerPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.props,n=r.answerId,o=r.questionId,a=r.courseId,i=r.courseSlug,s=r.userId,c=r.contextId,u=r.currentForum,l=r.currentForumUrl,d=r.sort,p=r.page,m=e||n;if(!m)return;var h=Object(W.c)([a,m]);Object(D.b)(h,d,Q).then(function(e){e===p?t.context.executeAction(v.b,{questionId:o,courseId:a,courseSlug:i,userId:s,contextId:c,sort:d,page:p,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole}):t.context.router.replace({pathname:t.context.router.location.pathname,params:{},query:_objectSpread(_objectSpread({},t.context.router.location.query),{page:e})})}).fail(function(){var e=l;t.context.router.replace(Object(P.a)(e,o)),t.context.executeAction(v.b,{userId:s,courseId:a,courseSlug:i,contextId:c,questionId:o,sort:N.f.detailSort,page:N.f.detailPage,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole})}).done()},t}a()(ThreadDetail,e);var t=ThreadDetail.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.questionId,r=e.sort,n=e.page,o=e.answerId,a=e.userId,i=e.courseId,s=e.courseSlug,c=e.contextId,u=e.currentForum;this.context.executeAction(v.d,{questionId:t,userId:a,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName}),o||1===n&&r===N.f.detailSort||this.context.executeAction(v.b,{questionId:t,userId:a,courseId:i,courseSlug:s,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName,includeDeleted:this.props.hasModerationRole})},t.componentDidMount=function componentDidMount(){this.getRole(),this.fetchAnswerPosition(),this._isMounted=!0},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.questionId,r=e.userId,n=e.courseId,o=e.courseSlug,a=e.contextId,i=e.sort,s=e.page,c=e.currentForum;e.sort!==this.props.sort||e.page!==this.props.page?this.context.executeAction(v.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:a,sort:i,page:s,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}):this.props.answerSavingState===N.m.SAVING&&e.answerSavingState===N.m.SAVED&&(this.context.executeAction(v.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:a,sort:i,page:s,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}),this.context.router.push({pathname:window.location.pathname,params:{},query:{sort:N.c.newestSort}}))},t.componentDidUpdate=function componentDidUpdate(e,t,r){(e.questionId!==this.props.questionId||e.currentForum&&e.currentForum.id!==this.props.currentForum.id)&&this.markRead()},t.componentWillUnmount=function componentWillUnmount(){this._isMounted=!1},t.getRole=function getRole(){var e=this,t=this.props,r=t.authenticated,n=t.isSuperuser,o=t.currentForum,a=o&&o.forumType.definition.groupId;a?Object(A.a)(a,r,n).then(function(t){e._isMounted&&e.setState({canTeach:t})}):this.setState({canTeach:this.props.hasModerationRole})},t.getBackLinkDescription=function getBackLinkDescription(){return this.props.currentForum.title},t.markRead=function markRead(){q.a.markRead(this.props.questionId)},t.render=function render(){var e=this,t=this.props,r=t.question,n=t.isClosed,o=t.isPinned,a=t.currentForumUrl,i=t.currentForum,s=t.sort,d=t.page,m=t.questionId,h=t.answerId,b=t.latestNewThreadId,f=t.commentId,g=t.courseId,S=a,v=i&&i.forumType.typeName,E=N.j.mentorForumType,w=N.j.groupForumType,P=i&&[E,w].indexOf(v)<0,D=P,q=this.state.canTeach&&r&&P,A=r?Object(l.c)(r):"undefined-thread-legend",k=this.state.inputClickCounter,B=Object(R.a)();return Object(c.d)("div",{className:"rc-ThreadDetail"},r&&Object(c.d)("h2",{id:A,className:"screenreader-only"},Object(c.d)(u.b,{message:z()("Thread: {title}"),title:r.content.question})),q&&Object(c.d)(O.a,{isPinned:o,question:r}),b===m&&Object(c.d)("div",{className:"sr-only","aria-live":"polite"},Object(c.d)(u.b,{message:z()("Your new thread was created")})),Object(c.d)("div",{className:"discussion-content"},Object(c.d)("div",{className:"horizontal-box align-items-vertical-center align-items-spacebetween"},Object(c.d)(p.a,{to:this.props.backLink,className:"back-area nostyle"},Object(c.d)("div",{className:"horizontal-box align-items-vertical-center"},Object(c.d)("i",{className:"back-arrow cif-arrow-left c-back-arrow-image"}),Object(c.d)("h1",{className:"headline-2-text c-back-label"},this.getBackLinkDescription()))),this.state.canTeach&&r&&Object(c.d)(C.a,{question:r,shouldShowMoveThread:D})),Object(c.d)("div",{className:"frost-container"},Object(c.d)("div",null,Object(c.d)(y.a,{goToInput:function goToInput(){return e.setState({inputClickCounter:k+1})},question:r,isPinned:o,forumLink:S}),n&&Object(c.d)("div",{className:"c-thread-locked card-no-action color-secondary-text"},Object(c.d)("div",{className:"horizontal-box align-items-absolute-center"},Object(c.d)("i",{className:"cif-lock"}),z()("This thread is closed. You cannot add any more responses.")))),Object(c.d)("div",null,Object(L.a)(g,v)&&Object(c.d)(x.a,{answerId:h,commentId:f,forumLink:S,questionId:m,fetchAnswerPosition:this.fetchAnswerPosition}),r&&Object(c.d)(F.a,{page:d,sort:s,answerId:h,commentId:f,forumLink:S,questionId:m,fetchAnswerPosition:this.fetchAnswerPosition}),!n&&Object(c.d)("div",{className:"reply-container horizontal-box"},Object(c.d)(j.a,{fullName:B.get("fullName"),externalUserId:B.get("externalUserId"),profileImageUrl:B.getProfileImageUrl()}),r&&Object(c.d)(T.a,{question:r,parentPost:r,savingState:this.props.answerSavingState,shouldFocusCounter:this.state.inputClickCounter,ariaLabel:z()("Reply to this thread"),ariaDescribedBy:A})),r&&r.state&&r.state.deleted&&Object(c.d)(I.a,{entry:r,hideUndoDelete:!1})))))},ThreadDetail}(f.a.Component);H.contextTypes={executeAction:h.a.func.isRequired,router:h.a.object.isRequired},e.a=S.a.compose(Object(k.a)(["ThreadDetailsStore","ThreadsStore","ThreadSettingsStore","CourseStore","ApplicationStore"],function(e,t){var r=e.ThreadDetailsStore,n=e.ThreadsStore,o=e.ThreadSettingsStore,a=e.CourseStore,i=e.ApplicationStore,s=t.questionId,c=r.getQuestion(s),u=n.threadToInsert&&n.threadToInsert.questionId;return{question:c,courseId:a.getCourseId(),courseSlug:a.getCourseSlug(),answerSavingState:c&&r.savingStates[c.id],isClosed:o.isClosed(),isPinned:o.isPinned(),latestNewThreadId:u,userId:i.getUserData().id,authenticated:i.isAuthenticatedUser(),isSuperuser:i.isSuperuser()}}),Object(M.a)({fields:["link","title"],subcomponents:[E.a,T.a,w.a]}),Object(B.a)(U.a))(H)},AgXR:function(module,e,t){"use strict";t.d(e,"c",function(){return i}),t.d(e,"a",function(){return s}),t.d(e,"b",function(){return c});var r=t("lSNA"),n=t.n(r),o=t("+uTL"),a=t("sQ/U");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var i=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(a.a.isAuthenticatedUser())return o.a(r,n).then(function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},s=function addSubscription(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(a.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),o.b(r,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},c=function deleteSubscription(e,t){var r=t.subscription,n=t.forumSubscriptionId,i=t.forumType;if(a.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",_objectSpread(_objectSpread({},r),{},{isInProgress:!0})),o.c(n,i).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:n,isSubscribed:!1})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))}},DF7H:function(module,e,t){"use strict";t.d(e,"a",function(){return B});var r=t("VbXa"),n=t.n(r),o=t("q1tI"),a=t.n(o),i=t("17x9"),s=t.n(i),c=t("F/us"),u=t.n(c),l=t("BVC1"),d=t("EdUP"),p=t("W1i5"),m=t("+LJP"),h=t("3JZf"),b=t("8cuT"),f=t("JPjw"),g=t("IDuc"),S=t("I4GC"),v=t("/ms3"),y=t("ZN56"),O=t("6B5c"),I=t("GqWO"),j=t("h4VP"),x=t("7/QA"),F=t("2BcA"),T=t("ii1C"),E=t("5+aF"),w=t("GP6s"),C=t.n(w),N=t("ikq3"),P=t("rfaR"),D=t.n(P),q=t("8Hdl"),R=t("ZJgU"),A=function(e){function NewThreadButton(t,r){var n;return(n=e.call(this,t,r)||this).handleSubmit=function(){var e=n.state,t=e.currentForum,r=e.activeFilterId,o=e.title,a=e.content,i=n.props,s=i.userId,c=i.filter,l=i.showSessionSelector,d=n.context.executeAction,p;if(u()(n.state).any(function(e){return e.hasError}))o.hasError?n.titleElemRef.focus():a.hasError?n.contentElemRef.focus():t.hasError&&n.forumElemRef.focus(),n.setState({showErrors:!0});else{var m={title:o.value,content:a.value,context:""};l?m.context=r:c&&(m.context=c.id);var h=!!m.context&&"all"!==m.context&&"ondemand"!==m.context,b={content:{question:m.title,details:m.content},overrideSessionId:h?m.context:void 0,state:{},userId:s,courseForumId:t.value.id,mentorForumId:t.value.id,groupForumId:t.value.id},f=t.value.forumId,g=t.value.forumType&&t.value.forumType.typeName;n.setState({saving:!0}),d(y.a,{options:b,forumType:g,forumId:f})}},n.handleDropdownChange=function(e){n.setState({activeFilterId:e})},n.handleOpenModal=function(){var e=n.props,t=e.userId,r=e.course,o=e.verificationDisplay;Object(O.a)(t,r,o).then(function(){return n.handleOpen()})},n.handleCancel=function(){n.setState(n.resetState())},n.handleCloseModal=function(){n.setState({showModal:!1})},n.handleInputChange=function(e,t){var r=n.state[e];r.value=t.value,r.hasError=!t.isValid,n.setState(function(e){return e})},n.clearErrorsAndSubmit=function(){n.setState({showErrors:!1}),setTimeout(function(){n.handleSubmit()},500)},n.setTitleElemRef=function(e){n.titleElemRef=e},n.setContentElemRef=function(e){n.contentElemRef=e},n.setForumElemRef=function(e){n.forumElemRef=e},n.state=n.resetState(),n.titleElemRef={},n.contentElemRef={},n.forumElemRef={},n}n()(NewThreadButton,e);var t=NewThreadButton.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.threadSavingState,r;if(!this.state.saving){var n,o=this.props.currentForum,a=!o;this.setState({currentForum:{value:o,hasError:a}})}t===F.m.SAVING&&e.threadSavingState===F.m.SAVED?this.handleSaveSuccess(e.newThread):t===F.m.SAVING&&e.threadSavingState===F.m.ERROR&&this.handleSaveError()},t.handleSaveSuccess=function handleSaveSuccess(e){var t=this.context.router,r=this.state.currentForum,n=this.props.rootPath,o=l.a.join(n,r.value.link);t.push(Object(I.a)(o,e.questionId)),this.setState(this.resetState())},t.handleSaveError=function handleSaveError(){this.setState({saveError:!0,saveErrorMessage:C()("Something went wrong. Please reload the page and try again."),saving:!1})},t.handleOpen=function handleOpen(){var e=this.state.showModal;this.setState(function(){return{showModal:!e}})},t.resetState=function resetState(){var e,t=this.props.currentForum,r=!t;return{showModal:!1,title:{value:"",hasError:!0},content:{value:j.c.create("",F.a),hasError:!0},currentForum:{value:t,hasError:r},showErrors:!1,saving:!1,saveError:!1,saveErrorMessage:"",activeFilterId:""}},t.render=function render(){var e=this,t=this.state,r=t.showModal,n=t.saving,o=t.saveError,i=t.content,s=t.showErrors,c=t.title,l=t.currentForum,d=t.saveErrorMessage,p=this.props,m=p.courseId,h=p.showSessionSelector,b=p.rootForumId,y=p.forums,O=x.a.generateContentLengthWarning(i.value),I=a.a.createElement("div",{className:"error-text c-modal-error-message"},d),j=null,F=l.value,T=y.filter(function(e){return!e.parentForumId||e.parentForumId===b}),E=u()(T.map(function(e){return[e].concat(y.filter(function(t){return t.parentForumId===e.id}))})).flatten(),w;E.length&&(j=a.a.createElement("div",{className:"c-input-area"},a.a.createElement(N.a,{fieldName:C()("Forum")}),a.a.createElement(S.b,{id:"forum-selector",rootForumId:b,hasError:s&&l.hasError,handleInputChange:this.handleInputChange,forums:E,value:F,elemRefHook:this.setForumElemRef}))),h&&(w=a.a.createElement("div",{className:"context-selector-container"},a.a.createElement("div",{className:"bgcolor-divider bt3-pull-left section-divider"}),a.a.createElement("div",{className:"c-input-area"},a.a.createElement(q.a,{component:"h3",variant:"h2semibold"},C()("You're currently viewing All Sessions.")),a.a.createElement(q.a,{component:"label",htmlFor:"new-thread-sessions-switcher"},a.a.createElement("span",{className:"caption-text color-secondary-text"},C()("Which session should this thread go in?"))),a.a.createElement(v.a,{id:"new-thread-sessions-switcher",hideAllSessionsOption:!0,limitSwitchingToCurrentBranch:!0,dropup:!0,handleDropdownChange:this.handleDropdownChange}))));var P=a.a.createElement(f.a,{onRequestClose:this.handleCloseModal,modalName:C()("Create a new post"),className:"rc-personalization__NewThreadModal large"},a.a.createElement(q.a,{component:"h1",variant:"h1semibold",className:"c-modal-title"},C()("Create a new post")),a.a.createElement("div",{className:"c-input-area"},a.a.createElement(N.a,{fieldName:C()("Title")}),a.a.createElement(S.c,{id:"title-input",hasError:s&&c.hasError,value:c.value,handleInputChange:this.handleInputChange,elemRefHook:this.setTitleElemRef})),a.a.createElement("div",{className:"c-input-area"},a.a.createElement(N.a,{fieldName:C()("Body")}),a.a.createElement(S.a,{id:"content-input",courseId:m,hasError:s&&i.hasError,handleInputChange:this.handleInputChange,cml:i.value,elemRefHook:this.setContentElemRef})),j,w,a.a.createElement("div",null,O,o&&I,a.a.createElement("div",{className:"horizontal-box align-items-right"},a.a.createElement(R.a,{size:"small",variant:"secondary",type:"button",onClick:this.handleCancel},C()("Cancel")),"  ",a.a.createElement(R.a,{component:g.a,ref:function ref(t){e.submitButton=t},disabled:n,size:"small",variant:"primary",type:"submit",onClick:this.clearErrorsAndSubmit,trackingName:"new_thread_create",withVisibilityTracking:!0,requireFullyVisible:!1},C()("Post")))));return a.a.createElement("div",{className:"rc-personalization__NewThreadForm"},a.a.createElement(R.a,{component:g.a,className:"new-thread-button",variant:"secondary",size:"small",ref:function ref(t){e.newThreadButton=t},id:"new-thread-btn",onClick:this.handleOpenModal,trackingName:"new_thread_button",withVisibilityTracking:!0,requireFullyVisible:!1},C()("Create post")),r&&P)},NewThreadButton}(a.a.Component);A.contextTypes={executeAction:s.a.func.isRequired,router:s.a.object.isRequired};var k=u.a.compose(Object(b.a)(["SessionFilterStore","ThreadsStore","ApplicationStore","CourseMembershipStore","VerificationStore","CourseStore"],function(e,t){var r=e.SessionFilterStore,n=e.ThreadsStore,o=e.ApplicationStore,a=e.CourseMembershipStore,i=e.VerificationStore,s=e.CourseStore;return{showSessionSelector:(o.isSuperuser()||a.hasModerationRole())&&"all"===r.activeFilterQueryString,filter:r.activeFilter,threadSavingState:n.savingState,newThread:n.threadToInsert,userId:o.getUserData().id,verificationDisplay:i.getVerificationDisplay(),course:s.getMetadata(),courseId:s.getCourseId()}}),Object(E.a)({fields:["forumType","title","link"]}),Object(m.a)(T.a),Object(p.a)(function(e){var t=e.currentForum&&e.currentForum.forumType.typeName!==F.j.rootForumType&&e.currentForum||void 0,r=e.courseForums&&e.courseForums.find(function(e){return e.forumType.typeName===F.j.rootForumType});return{forums:e.courseForums?e.courseForums.filter(function(e){return e.forumType.typeName!==F.j.rootForumType}).concat(e.mentorForums).concat(e.groupForums):[],rootForumId:r&&r.id,currentForum:t,currentForumId:t&&t.id}}),Object(d.a)(function(e){return e.forums.length}))(A);e.b=Object(h.a)()(k);var B=k,U=A},HRhj:function(module,e,t){"use strict";var r=t("S+eF"),n=t.n(r),o=t("TSOT"),a=t("2BcA"),i=Object(o.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),s=Object(o.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),c=Object(o.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),u=function getSubscription(e,t){return t===a.j.mentorForumType?n()(s.get(e)):t===a.j.groupForumType?n()(c.get(e)):n()(i.get(e))},l=function subscribe(e,t){return t===a.j.mentorForumType?n()(s.put(e)):t===a.j.groupForumType?n()(c.put(e)):n()(i.put(e))},d=function unsubscribe(e,t){return t===a.j.mentorForumType?n()(s.delete(e)):t===a.j.groupForumType?n()(c.delete(e)):n()(i.delete(e))};e.a={getSubscription:u,subscribe:l,unsubscribe:d}},HbX8:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),o=t("2BcA");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.a=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),r=t.find(function(e){return e.forumType.typeName===o.j.rootForumType}),n=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==r.id&&(n=t.find(function(t){return t.id===e.currentForum.parentForumId}));var a=t.filter(function(e){return e.parentForumId===n.id});return a.unshift(n),_objectSpread(_objectSpread({},e),{},{listedForums:a,parentForumId:n.id})}},Iqdo:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("q1tI"),a=t.n(o),i=t("17x9"),s=t.n(i),c=t("GP6s"),u=t.n(c),l=t("kcfJ"),d=t("IDuc"),p=t("ZJgU"),m=t("oEqI"),h=t("kyt0"),b=t("AeFk"),f=function(e){function SearchBar(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).handleChange=function(e){var r,n;(0,t.props.handleChange)(e.target.value)},t.handleSubmitClick=function(e){var r;e.preventDefault(),(0,t.props.handleSubmit)()},t.handleClear=function(){var e=t.context.router,r=e.location,n=r.query,o=r.pathname,a=e.params,i=t.props,s=i.handleBlur,c=i.handleClear;n.q||s(),c(),delete n.q,e.push({pathname:o,params:a,query:n})},t.handleBlur=function(){var e=t.props.handleBlur;e&&e()},t.handleKeyDown=function(e){var r=t.props,n=r.handleSubmit,o=r.handleBlur,a=r.handleShiftTab;switch(e.key){case"Enter":n();break;case"Tab":e.shiftKey&&o&&(o(),a(e))}},t.handleClearKeyDown=function(e){var r=t.props,n=r.handleBlur,o=r.handleShiftTab;switch(e.key){case"Enter":t.handleClear();break;case"Tab":e.shiftKey&&n&&(n(),o(e))}},t.submitKeyDown=function(e){var r=t.props,n=r.handleTab,o=r.handleShiftTab,a=r.handleSubmit;"Tab"===e.key?e.shiftKey?o(e):n(e):"Enter"!==e.key&&" "!==e.key||a()},t}var t;return n()(SearchBar,e),SearchBar.prototype.render=function render(){var e=this,t=this.props,r=t.query,n=t.theme,o=t.placeholder,a=Object(b.c)({flexBasis:"30px"}),i=Object(b.c)({zIndex:1e3,border:"none",".input-area":{background:"#FFFFFF",border:"1px solid #666666",boxSizing:"border-box",borderRadius:"4px",margin:n.spacing(0,8,0,0),".search-input":{borderRadius:"4px",padding:"7px 12px"},".cif-cancel-hint":{opacity:1,margin:n.spacing(0,0,0,16)}}}),s=Object(b.c)({display:"flex"}),c=Object(b.d)(h.a,{size:"small",role:"button",onMouseDown:this.handleClear,tabIndex:0,onKeyDown:this.handleClearKeyDown,"aria-label":u()("Clear Search"),css:a});return Object(b.d)("div",{className:"rc-personalization__SearchBar search-bar expand-block expanded flex-1",css:i},Object(b.d)("div",{className:"input-area",css:s},Object(b.d)(l.a,{trackingName:"search_bar",value:r,placeholder:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:function ref(t){e.searchbox=t},"aria-label":u()("Search Input"),className:"search-input"}),r&&c),Object(b.d)(p.a,{component:d.a,variant:"primary",size:"small",withVisibilityTracking:!0,requireFullyVisible:!1,onClick:this.handleSubmitClick,onMouseDown:this.handleSubmitClick,onKeyDown:this.submitKeyDown,onBlur:this.handleBlur,trackingName:"search_forum","aria-label":u()("submit search")},u()("Search")))},SearchBar}(o.Component);f.contextTypes={router:s.a.object.isRequired},f.defaultProps={handleBlur:function handleBlur(){},handleTab:function handleTab(){},handleShiftTab:function handleShiftTab(){},handleClear:function handleClear(){}},e.a=Object(m.a)(f)},Jh7B:function(module,exports,e){},KomV:function(module,exports,e){var t=e("UJIz"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},RYD2:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("w/1P"),a=t.n(o),i=t("CsdX"),s=t("q1tI"),c=t.n(s),u=t("eJMc"),l=t.n(u),d=t("F/us"),p=t.n(d),m=t("cIEV"),h=t.n(m),b=function emptyFunction(){},f=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(d.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,n=e.separator,o=e.separatorStyles,s=this.getFilteredLinks();return c.a.createElement("ol",{className:a()("rc-Breadcrumbs inline",t)},s.map(function(e,t){var a=[c.a.createElement("li",null,e.href?c.a.createElement(l.a,{className:r,to:e.href,onClick:e.onClick||b},e.label):c.a.createElement("span",{className:r},e.label))];return t!==s.length-1&&a.push(c.a.createElement("li",Object(i.d)("divider",o),n||"/")),a}))},Breadcrumbs}(c.a.Component);e.a=f},UJIz:function(module,exports,e){},VDSF:function(module,exports,e){},VuLx:function(module,exports,e){var t=e("bof/"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"bof/":function(module,exports,e){},"cD+G":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("17x9"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("F/us"),u=t.n(c),l=t("w/1P"),d=t.n(l),p=t("eJMc"),m=t.n(p),h=t("BVC1"),b=t("BZ+2"),f=t("zFZo"),g=t("weTL"),S=t("+LJP"),v=t("ii1C"),y=t("W1i5"),O=t("GqWO"),I=t("HbX8"),j=t("5+aF"),x=t("6fvP"),F=t("GP6s"),T=t.n(F),E=t("vJ/u"),w=t.n(E),C=function(e){function SubforumSidebar(t){var r;return(r=e.call(this,t)||this).resourcePanelEpic=x.b.enabledResourcePanelToPublic(),r}var t;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this,t=this.props,r=t.listedForums,n=t.currentForumId,o=t.parentForumId,a=t.courseSlug;if(!r||r.length<=1)return null;return s.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},s.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},T()("Subforums")),s.a.createElement("ul",{className:"nostyle"},r.map(function(t){var r=d()("forum-title",{"body-2-text":t.id===n,"body-1-text":t.id!==n}),i=h.a.join(Object(O.j)(a),t.link),c=Object(O.m)(t.forumId);return i=e.resourcePanelEpic&&c||i,s.a.createElement("li",{className:"subforum-entry"},s.a.createElement(m.a,{key:t.id,to:i,className:"nostyle","aria-current":t.id===n},t.id===n&&s.a.createElement("div",{className:"current-forum-indicator"}),s.a.createElement("div",{className:r},t.id===o?T()("All"):t.title)))})))},SubforumSidebar}(s.a.Component);C.propTypes={courseSlug:a.a.string,listedForums:a.a.arrayOf(a.a.oneOfType([a.a.instanceOf(b.a),a.a.instanceOf(f.a),a.a.instanceOf(g.a)])),currentForumId:a.a.string,parentForumId:a.a.string},e.a=u.a.compose(Object(j.a)({fields:["link","title","description","parentForumId"]}),Object(S.a)(v.a),Object(y.a)(I.a))(C)},cIEV:function(module,exports,e){var t=e("cOQ1"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},cOQ1:function(module,exports,e){},cwGm:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("17x9"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("F/us"),u=t.n(c),l=t("ZN56"),d=t("1AMt"),p=t("da3Y"),m=t("DF7H"),h=t("45ES"),b=t("GqWO"),f=t("WE4C"),g=t("JVW9"),S=t("+LJP"),v=t("ii1C"),y=t("5+aF"),O=t("EdUP"),I=t("8cuT"),j=t("GP6s"),x=t.n(j),F=t("JTnn"),T=t.n(F),E=t("6/Gu"),w=function(e){function ThreadsList(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={inSearch:!1},t.entriesChanged=function(e,t){var r,n,o=!1;return e.length!==t.length&&(o=!0),(null===(r=e[0])||void 0===r?void 0:r.id)!==(null===(n=t[0])||void 0===n?void 0:n.id)&&(o=!0),o},t.onPageChange=function(e){var r;t.context.router.push({pathname:t.context.router.location.pathname,params:{},query:Object.assign(t.context.router.location.query,{page:e})})},t.toggleSearch=function(e){t.setState({inSearch:!e})},t.renderEntry=function(e){var r=t.props,n=r.activeFilterQueryString,o=r.courseForums,a=r.mentorForums,i=r.groupForums,c=r.currentForum,u=r.currentForumUrl,l=e.lastAnsweredAt&&e.lastAnsweredBy,d=!f.a.hasUnread(e),p=l?e.lastAnsweredBy:e.creator,m=x()("posted"),g,S=o.concat(a).concat(i).find(function(t){return t.forumId===e.forumId}),v=S&&c.id!==S.id&&S.title||void 0,y=b.k(u,e),O,I=void 0!==e.answerCount&&!isNaN(e.answerCount)?e.answerCount:e.topLevelAnswerCount;return s.a.createElement(h.a,{key:e.id+n,threadUrl:y,profile:p,timestamp:e.lastAnsweredAt||e.createdAt,threadName:e.content.question,questionId:e.id,questionUserId:e.creatorId,entry:e,isPinned:!(!e.state||!e.state.pinned),isDeleted:!(!e.state||!e.state.deleted),isRead:d,forumName:v,metadataLabel:m,viewCount:Math.max(I,e.viewCount),answerCount:I,badge:e.answerBadge.answerBadge})},t}n()(ThreadsList,e);var t=ThreadsList.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.sort,r=e.answered,n=e.page,o=e.currentForum,a=e.subForum,i=e.activeFilterQueryString,s=a||o;this.context.executeAction(l.c,{filterQueryString:i,sort:t,answered:r,pageNum:n,forumType:s&&s.forumType.typeName,forumId:s&&s.id,userId:this.props.userId,includeDeleted:this.props.hasModerationRole})},t.componentWillUpdate=function componentWillUpdate(e,t,r){var n,o,a=this.props,i=a.currentForum,s=a.subForum,c=i;s&&(c=s),(this.props.sort!==e.sort||this.props.answered!==e.answered||this.props.page!==e.page||this.props.currentForumId!==e.currentForumId||this.props.subForumId!==e.subForumId||(null===(n=this.props.subForum)||void 0===n?void 0:n.id)!==(null===(o=e.subForum)||void 0===o?void 0:o.id)||this.props.activeFilterQueryString!==e.activeFilterQueryString||this.entriesChanged(this.props.entries,e.entries))&&this.context.executeAction(l.c,{filterQueryString:e.activeFilterQueryString,sort:e.sort,answered:e.answered,pageNum:e.page,forumType:c&&c.forumType.typeName,forumId:c&&c.id,userId:this.props.userId,includeDeleted:this.props.hasModerationRole})},t.render=function render(){var e=this.context.router.isActive({pathname:b.c()}),t=!(void 0!==this.props.pageCount&&this.props.pageCount<=1);return s.a.createElement(E.a,{container:!0,className:"rc-ThreadsList",css:{maxWidth:"650px"}},s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(d.a,{currentForum:this.props.currentForum,inSearch:this.state.inSearch}),s.a.createElement(p.a,{emptyStatePlaceholderText:x()("No Posts Yet"),fossilized:this.state.inSearch,loadingState:this.props.loadingState},this.props.entries&&this.props.entries.map(this.renderEntry))),t&&s.a.createElement(E.a,{item:!0,xs:12,css:{justifyContent:"center"}},s.a.createElement(g.a,{style:{textAlign:"center",marginTop:"32px"},onClickHandler:this.onPageChange,pageCount:this.props.pageCount,currentPage:this.props.page,maxPages:5})))},ThreadsList}(s.a.Component);w.contextTypes={executeAction:a.a.func.isRequired,router:a.a.object.isRequired},e.a=Object(c.compose)(Object(I.a)(["SessionFilterStore","ThreadsStore","ApplicationStore"],function(e){var t=e.SessionFilterStore,r=e.ThreadsStore,n=e.ApplicationStore;return{activeFilterQueryString:t.activeFilterQueryString,entries:r.getThreadsPage(),loadingState:r.getLoadingState(),pageCount:r.getPageCount(),userId:n.getUserData().id}}),Object(y.a)({fields:["title","link","forumType"],subcomponents:[m.a]}),Object(S.a)(v.a),Object(O.a)(function(e){return!!(void 0!==e.activeFilterQueryString&&e.sort&&e.page&&e.currentForum)}))(w)},d2tF:function(module,e,t){"use strict";var r=t("k8aN");t.d(e,"b",function(){return r.a});var n=t("Iqdo");t.d(e,"a",function(){return n.a});var o=t("yMcb")},fg2g:function(module,e,t){"use strict";var r=t("VkAN"),n=t.n(r),o=t("VbXa"),a=t.n(o),i=t("F/us"),s=t.n(i),c=t("17x9"),u=t.n(c),l=t("q1tI"),d=t.n(l),p=t("i1H6"),m=t("xJyF"),h=t("lTCR"),b=t.n(h),f=t("PJ/k"),g=t.n(f),S=t("q5zD"),v=t("/ms3"),y=t("KJtU"),O=t("8cuT"),I=t("+LJP"),j=t("GP6s"),x=t.n(j),F=t("VuLx"),T=t.n(F);function _templateObject(){var e=n()(["\n      query FilterSessionsV2AuthoringEligibilityCheckQuery($courseId: String!) {\n        SessionsV2AuthoringEligibilityCheckV1Resource {\n          get(id: $courseId) {\n            eligibleForSessionsV2\n          }\n        }\n      }\n    "]);return _templateObject=function _templateObject(){return e},e}var E=function(e){function SessionFilter(t,r){var n;return(n=e.call(this,t,r)||this).handleDropdownChange=function(e,t){"ondemand"===e?n.context.executeAction(y.d):"all"===e?n.context.executeAction(y.c,{branchId:t}):n.context.executeAction(y.e,{sessionId:e})},!t.loaded&&t.hasModerationRole&&r.executeAction(y.a,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),t.loaded||t.hasModerationRole||r.executeAction(y.b,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),n}var t;return a()(SessionFilter,e),SessionFilter.prototype.render=function render(){var e=this.props,t=e.discussionsLandingPageActive,r=e.loaded,n=e.hasModerationRole,o=e.isSessionsV2Enabled;if(!t||!r||!n)return null;var a=x()("Instructors can now change the structure of the discussion forums for each version of the course to better\n        fit the material. It is still possible to view all discussions in a particular version, but no longer\n        possible to view discussions across every session."),i="session-filter-tooltip",s=d.a.createElement(f.Tooltip,{id:i},a);return d.a.createElement("div",{className:"rc-SessionFilter card-rich-interaction cozy"},d.a.createElement("div",null,d.a.createElement("div",{className:"horizontal-box align-items-spacebetween"},d.a.createElement("div",null,d.a.createElement("h2",{className:"label-text color-secondary-text title"},d.a.createElement(S.a,{name:"lock"})," ",o?x()("Filter by version and cohort"):x()("Filter by session"))),this.props.containsMultipleBranches?d.a.createElement(f.OverlayTrigger,{placement:"bottom",overlay:s,trigger:["hover","focus"]},d.a.createElement("div",{className:"label-text color-secondary-text title",role:"tooltip",tabIndex:"0","aria-label":a},d.a.createElement(S.a,{name:"question-circle-o",className:"cif-lg"}))):null),d.a.createElement("p",{className:"caption-text color-secondary-text align-left"},x()("Visible to staff and mentors")),d.a.createElement(v.a,{isSessionsV2Enabled:o,handleDropdownChange:this.handleDropdownChange})))},SessionFilter}(d.a.Component);E.propTypes={courseId:u.a.string,loaded:u.a.bool,currentSessionId:u.a.string,discussionsLandingPageActive:u.a.bool,containsMultipleBranches:u.a.bool,hasModerationRole:u.a.bool,isPrivateSession:u.a.bool,forceLoad:u.a.bool,isSessionsV2Enabled:u.a.bool},E.contextTypes={executeAction:u.a.func.isRequired},E.defaultProps={forceLoad:!1},e.a=Object(i.compose)(Object(O.a)(["SessionFilterStore","SessionStore","CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var r=e.SessionFilterStore,n=e.SessionStore,o=e.CourseStore,a=e.CourseMembershipStore,i=e.ApplicationStore;return{hasModerationRole:a.hasModerationRole()||i.isSuperuser(),loaded:r.filtersLoaded,containsMultipleBranches:!!r.containsMultipleBranches,currentSessionId:n.isEnrolled()?n.getSessionId():void 0,courseSlug:o.getCourseSlug(),courseId:o.getCourseId(),isPrivateSession:!!n.isEnrolled()&&n.isSessionPrivate()}}),Object(p.a)(["courseId"]),Object(m.a)(b()(_templateObject()),{options:function options(e){var t;return{variables:{courseId:e.courseId}}},props:function props(e){var t,r=e.data.SessionsV2AuthoringEligibilityCheckV1Resource;if(r){var n=r.get;return{isSessionsV2Enabled:n&&n.eligibleForSessionsV2}}return{isSessionsV2Enabled:!1}}}),Object(I.a)(function(e,t){return{discussionsLandingPageActive:t.forceLoad||e.isActive({pathname:"/learn/".concat(t.courseSlug,"/discussions"),query:e.location.query},!0)||e.isActive({pathname:"/learn/".concat(t.courseSlug,"/discussions/all"),query:e.location.query},!0)}}))(E)},frXD:function(module,exports,e){},hSS9:function(module,exports,e){var t=e("Jh7B"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},ju0T:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),o=t("VbXa"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("45ES"),u=t("GqWO"),l=t("GP6s"),d=t.n(l),p=t("9A5E");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=function(e){function SearchResultEntry(){return e.apply(this,arguments)||this}var t;return a()(SearchResultEntry,e),SearchResultEntry.prototype.render=function render(){var e=this.props.entry,t=s.a.createElement(c.a,{key:e.id+u.k(this.props.forumLink,this.props.entry),threadUrl:(null==e?void 0:e.title)&&u.k(this.props.forumLink,this.props.entry),profile:e.creator,timestamp:e.createdAt,threadName:e.threadName,questionUserId:e.creator.id,entry:_objectSpread(_objectSpread({},e),{},{content:{question:e.title,details:e.content},question:e.content,questionId:e.courseForumQuestionId}),questionId:e.courseForumQuestionId,metadataLabel:d()("posted")}),r;return!(null==e?void 0:e.title)&&s.a.createElement(p.c,{to:u.k(this.props.forumLink,e),trackingName:"thread_list_entry","aria-label":e.title,data:{question_id:e.courseForumQuestionId,question_user_id:e.creator.id},className:"nostyle"},t)||t},SearchResultEntry}(s.a.Component);e.a=m},k8aN:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("VkAN"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("17x9"),u=t.n(c),l=t("d2tF"),d=t("GqWO"),p=t("AeFk"),m=t("oEqI");function _templateObject(){var e=a()(["\n  position: relative;\n  .search-box {\n    width: 100%;\n    &:hover {\n      outline: none;\n    }\n  }\n  .search-bar {\n    border: 1px solid ",";\n  }\n"]);return _templateObject=function _templateObject(){return e},e}var h=function styles(e){return Object(p.c)(_templateObject(),e.palette.gray[500])},b=function(e){function SearchBox(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={query:""},t.handleQueryChange=function(e){t.setState({query:e})},t.handleFocus=function(){var e;(0,t.props.animateToSearch)()},t.handleBlur=function(){var e;(0,t.props.animateFromSearch)()},t.handleClear=function(){t.setState({query:""})},t.handleTab=function(e){var r=t.props.nextElementId,n=r&&document&&document.getElementById(r);n&&(e.preventDefault(),n.focus())},t.handleShiftTab=function(e){var r=t.props.previousElementId,n=r&&document&&document.getElementById(r);n&&(e.preventDefault(),n.focus())},t.submitSearch=function(){var e=t.state.query,r=t.context.router,n=t.props.onSubmit,o,a=/discussions\/(forums|weeks|groups)\//i.test(r.location.pathname);if(e){var i=r.location.pathname,s=e.replace("*",""),c=function routerFunc(e){return r.push({pathname:e,params:{},query:{q:s}})};a?(c(i),n(s)):c(Object(d.f)())}},t}var t;return n()(SearchBox,e),SearchBox.prototype.render=function render(){var e=this.state.query,t=this.props.placeholder;return Object(p.d)(l.a,{query:e,handleSubmit:this.submitSearch,handleChange:this.handleQueryChange,handleBlur:this.handleBlur,handleShiftTab:this.handleShiftTab,handleTab:this.handleTab,handleClear:this.handleClear,focus:!0,css:h(this.props.theme),placeholder:t})},SearchBox}(s.a.Component);b.contextTypes={router:u.a.object.isRequired},e.a=Object(m.a)(b)},mpHW:function(module,e,t){"use strict";t.d(e,"a",function(){return N});var r=t("VbXa"),n=t.n(r),o=t("q1tI"),a=t.n(o),i=t("17x9"),s=t.n(i),c=t("2iyS"),u=t("wd/R"),l=t.n(u),d=t("w/1P"),p=t.n(d),m=t("tag9"),h=t("5gsr"),b=t("ULqJ"),f=t("qFaW"),g=t("AeFk"),S=t("763+"),v=t("6/Gu"),y=t("8Hdl"),O=t("oEqI"),I=t("GP6s"),j=t.n(I),x=t("0lLQ"),F=t("eJMc"),T=t.n(F),E=t("NQhL"),w=t("WBtN");function PostAge(e){var t=e.createdAt,r=e.answerCount,n=r&&r>0?"replied":"posted";return Object(g.d)("span",null,n+" "+l()(new Date(t)).fromNow())}function ContributorNameWithIcon(e){var t=e.fullName,r=e.photoUrl,n=e.className,o=t&&Object(m.a)(t)||"--",a=Object(S.a)();return Object(g.d)("div",{className:n},Object(g.d)(E.a,{color:a.palette.blue[100],initials:o,photoUrl:r}),Object(g.d)("span",{css:{height:"36px",display:"inline-block",paddingLeft:"7px"}},t))}var C=function(e){function _ForumThreadCard(){return e.apply(this,arguments)||this}var t;return n()(_ForumThreadCard,e),_ForumThreadCard.prototype.render=function render(){var e=this.props,t=e.title,r=e.titleLink,n=e.description,o=e.creator,a=e.badge,i=e.lastReplyDate,s=e.lastContributor,u=e.forumName,l=e.myPostOrReplyBadgeText,d=e.forumQuestionId,p=e.isRead,m=(null==d?void 0:d.includes("~"))?d:"".concat(this.context.userId,"~").concat(this.context.courseId,"~").concat(d);return Object(g.d)(v.a,{container:!0,className:"rc-personalization_ForumThreadCard"},u&&Object(g.d)(v.a,null,Object(g.d)(v.a,{item:!0},Object(g.d)(y.a,{variant:"body2",color:"supportText",css:{margin:this.props.theme.spacing(0,0,8,0)}},u))),Object(g.d)(v.a,{container:!0,item:!0,css:{justifyContent:"flex-start",flexFlow:"initial"}},this.props.pinned&&Object(g.d)(v.a,{item:!0},Object(g.d)(x.a,{"aria-label":j()("pinned forum post"),size:"medium",css:{margin:this.props.theme.spacing(0,8,0,0),background:this.props.theme.palette.yellow[500],padding:"3px",height:"24px",width:"24px",borderRadius:"100%"}})),Object(g.d)(v.a,{item:!0},!r&&t&&Object(g.d)(y.a,{variant:p?"h2":"h2semibold",className:"rc-personalization_ForumThreadCard__title"},t),r)),Object(g.d)(v.a,{item:!0,xs:12,css:{padding:this.props.theme.spacing(12,0,16,0)}},n),(a||l)&&Object(g.d)(v.a,{item:!0,xs:12,className:"rc-personalization_ForumThreadCard__content__tags",css:{padding:this.props.theme.spacing(0,0,24,0)}},a&&Object(g.d)(f.a,{badge:a}),l&&Object(g.d)(f.a,{badge:l})),Object(g.d)(v.a,{container:!0,item:!0,css:{justifyContent:"space-between"}},Object(g.d)(v.a,{item:!0,className:"rc-personalization_ForumThreadCard__content__responseControls"},void 0!==this.props.replyCount&&o&&Object(g.d)("span",{className:"rc-personalization_ForumThreadCard__content__responseControls__controlContainer"},Object(c.a)(o)&&Object(g.d)("span",{className:"rc-personalization_ForumThreadCard__content__responseControls__controlContainer__button"},Object(g.d)(h.a,{creator:o,forumPostId:m,upvotes:this.props.upvoteCount,isUpvoted:this.props.isUpvoted})),this.props.threadUrl&&Object(g.d)("span",{className:"rc-personalization_ForumThreadCard__content__responseControls__controlContainer__button"},Object(g.d)(T.a,{to:this.props.threadUrl,tabIndex:-1},Object(g.d)(b.a,{forumQuestionId:d,replies:this.props.replyCount,creator:o}))))),Object(g.d)(v.a,{item:!0},Object(g.d)(y.a,{variant:"body2",component:"span",css:{display:"flex",flexFlow:"row",alignItems:"center",lineHeight:"36px"}},s&&Object(g.d)(ContributorNameWithIcon,{css:{display:"flex",alignItems:"center"},fullName:s.fullName,photoUrl:s.photoUrl}),Object(g.d)("span",{css:{padding:this.props.theme.spacing(0,4)}},"·"),this.props.tags&&Object(g.d)("span",{css:{lineHeight:"36px"}},this.props.tags),Object(g.d)("span",{css:{lineHeight:"36px"}},Object(g.d)(PostAge,{createdAt:i||this.props.createdAt||0,answerCount:this.props.answerCount||0}))))),this.props.children&&Object(g.d)(v.a,{item:!0},this.props.children))},_ForumThreadCard}(a.a.Component);function CardShimmer(){return Object(g.d)("div",{className:"rc-personalization_ForumThreadCard"},Object(g.d)("div",{className:"rc-personalization_ForumThreadCard__content"},Object(g.d)(w.b,{width:"100px"}),Object(g.d)("span",{className:p()("comment","br","animated","rc-personalization_ForumThreadCard__content__PostAge"),style:{backgroundColor:w.c,display:"block",height:"10px",width:"40px"}})),Object(g.d)(w.a,null))}C.contextTypes={courseId:i.string,userId:i.string};var N=Object(O.a)(C)},oRWh:function(module,e,t){"use strict";t.d(e,"a",function(){return y});var r=t("VbXa"),n=t.n(r),o=t("AeFk"),a=t("w/1P"),i=t.n(a),s=t("8Hdl"),c=t("fAYU"),u=t("VS/1"),l=t("CsdX"),d=t("q1tI"),p=t.n(d),m=t("eJMc"),h=t.n(m),b=t("F/us"),f=t.n(b),g=t("cIEV"),S=t.n(g),v=function emptyFunction(){},y=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(b.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,n=e.separator,a=e.separatorStyles,d=this.getFilteredLinks();return Object(o.d)("ol",{className:i()("rc-Breadcrumbs inline",t)},d.map(function(e,t){var i=[Object(o.d)(s.a,{component:"li"},e.href?Object(o.d)(c.a,{variant:"quiet",component:h.a,className:r,to:e.href},e.label):Object(o.d)("span",{className:r},e.label))];return t!==d.length-1&&i.push(Object(o.d)("li",Object(l.d)("divider",a),n||Object(o.d)(u.a,{size:"small"}))),i}))},Breadcrumbs}(p.a.Component)},qFaW:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("q1tI"),a=t.n(o),i=t("e8+g"),s=t("8cuT"),c=t("d82X"),u=t("GP6s"),l=t.n(u);function getTranslations(){return{INSTRUCTOR_CREATED:l()("Staff post"),STAFF_CREATED:l()("Staff post"),INSTRUCTOR_RESPONDED:l()("Staff reply"),MENTOR_CREATED:l()("Mentor post"),STAFF_RESPONDED:l()("Staff reply"),MENTOR_RESPONDED:l()("Mentor reply"),HIGHLIGHTED:l()("Highlighted"),FORUM_POST_BADGE_MENTOR_RESPONDED:l()("Mentor reply"),FORUM_POST_BADGE_STAFF_RESPONDED:l()("Staff reply"),FORUM_POST_BADGE_INSTRUCTOR_RESPONDED:l()("Staff reply"),FORUM_POST_BADGE_MENTOR_CREATED:l()("Mentor post"),FORUM_POST_BADGE_STAFF_CREATED:l()("Staff post"),FORUM_POST_BADGE_INSTRUCTOR_CREATED:l()("Staff post"),FORUM_POST_BADGE_HIGHLIGHTED:l()("Highlighted"),MY_POST:l()("My post"),REPLIED:l()("Replied")}}var d=function(e){function ThreadBadge(){return e.apply(this,arguments)||this}var t;return n()(ThreadBadge,e),ThreadBadge.prototype.render=function render(){var e=this.props,t=e.badge,r=e.courseId,n=getTranslations(),o="";if(!(o=Object(i.a)(r)&&"HIGHLIGHTED"===t?n.HIGHLIGHTED:n[t]))return null;return a.a.createElement(c.a,{label:o})},ThreadBadge}(a.a.Component);e.a=Object(s.a)(d,["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}})},rfaR:function(module,exports,e){var t=e("frXD"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"vJ/u":function(module,exports,e){var t=e("VDSF"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},wZgz:function(module,e,t){"use strict";t.r(e);var r=t("VbXa"),n=t.n(r),o=t("17x9"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("F/us"),u=t.n(c),l=t("BVC1"),d=t("wvSq"),p=t("GqWO"),m=t("7GkZ"),h=t("zfwB"),b=t("zwd1"),f=t("fg2g"),g=t("cD+G"),S=t("cwGm"),v=t("AZBp"),y=t("ypD2"),O=t("ii1C"),I=t("HbX8"),j=t("2BcA"),x=t("5+aF"),F=t("W1i5"),T=t("+LJP"),E=t("GP6s"),w=t.n(E),C=t("KomV"),N=t.n(C),P=t("6fvP"),D=t("jrIE"),q=function(e){function ThreadsView(t){var r;return(r=e.call(this,t)||this).renderBreadCrumbs=function(){var e,t=r.props.currentForum,n,o=!!r.context.router.params.question_id;t.parentForumId&&r.props.listedForums.forEach(function(e){(null==t?void 0:t.parentForumId)&&e&&e.id&&t.parentForumId===e.id&&(n=e)});var a=[{label:w()("Discussion Forums"),href:Object(p.h)()}],i=n?{label:n.title,href:l.a.join(Object(p.j)(r.props.courseSlug),n.link)}:void 0,c;return i&&a.push(i),!!(null===(e=r.context.router.location.query)||void 0===e?void 0:e.q)?((a=[]).push({label:w()("Course Overview"),href:Object(p.i)(r.props.courseSlug)}),a.push({label:w()("Forums"),href:Object(p.h)()}),a.push({label:w()("Search results")})):o?a.push({label:t.title,href:l.a.join(Object(p.j)(r.props.courseSlug),t.link)}):a.push({label:t.title}),s.a.createElement(h.a,{separator:s.a.createElement(D.a,{size:16,color:"#1F1F1F"}),className:"breadcrumbs",links:a})},r.resourcePanelEnabled=P.b.enabledResourcePanelToPublic(),r}n()(ThreadsView,e);var t=ThreadsView.prototype;return t.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===j.j.itemForumType)return null;return s.a.createElement("div",{className:"flex-1"},s.a.createElement(b.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},t.render=function render(){var e,t=this.props.currentForum;if(!t)return s.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},w()("Oops! Looks like this thread isn't viewable or does not exist."));var r=t.title,n=t.description,o=t.id,a=!!this.context.router.params.question_id,i=!!(null===(e=this.context.router.location.query)||void 0===e?void 0:e.q);return s.a.createElement("div",{className:"rc-personalization_ThreadsView"},s.a.createElement("div",{className:"horizontal-box vertical-when-tablet"},s.a.createElement("div",{className:"flex-2 threads-view-header"},this.renderBreadCrumbs(),s.a.createElement("div",null,!a&&!i&&s.a.createElement("div",{className:"forum-name color-primary-text"},r),!a&&!i&&s.a.createElement("div",{className:"forum-description horizontal-box"},s.a.createElement(m.a,{cml:n,isCdsEnabled:!0}),s.a.createElement("div",null,this.renderSubscriptionButton())))),s.a.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},s.a.createElement(f.a,null))),s.a.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},s.a.createElement(d.a,{className:"flex-2 discussions-body-column",key:o})))},ThreadsView}(s.a.Component);q.contextTypes={router:a.a.object.isRequired},e.default=Object(c.compose)(Object(x.a)({fields:["title","description","link"],subcomponents:[g.a,S.a,v.a,y.a]}),Object(T.a)(O.a),Object(F.a)(I.a))(q)},wvSq:function(module,e,t){"use strict";t.d(e,"a",function(){return k});var r=t("pVnL"),n=t.n(r),o=t("VbXa"),a=t.n(o),i=t("lSNA"),s=t.n(i),c=t("17x9"),u=t.n(c),l=t("q1tI"),d=t.n(l),p=t("F/us"),m=t.n(p),h=t("w/1P"),b=t.n(h),f=t("L1vm"),g=t("2BcA"),S=t("cwGm"),v=t("yMcb"),y=t("KJtU"),O=t("8cuT"),I=t("+LJP"),j=t("ngyh"),x=t("8/1n"),F=t("GP6s"),T=t.n(F),E=t("NoGk"),w=t("d2tF"),C=t("DF7H"),N=t("763+"),P=t("6/Gu"),D=t("AeFk");function SearchBarCoreLayout(e){var t,r,n=e.children,o=Object(N.a)(),a=Object(D.c)((r={},s()(r,".searchBoxContainer",s()({justifyContent:"flex-start",margin:o.spacing(0,16,0,0)},"".concat(o.breakpoints.up("xs")),{width:"330px",minWidth:"330px"})),s()(r,".newThreadButtonContainer",(t={},s()(t,"".concat(o.breakpoints.up("sm")),{padding:o.spacing(0)}),s()(t,"".concat(o.breakpoints.up("xs")),{width:"100px",minWidth:"100px"}),s()(t,"".concat(o.breakpoints.down("xs")),{padding:o.spacing(24,0,0,0)}),t)),r));return Object(D.d)(P.a,{container:!0,css:a},Object(D.d)(P.a,{container:!0,item:!0,style:{display:"flex"}},Object(D.d)(P.a,{item:!0,xs:12,sm:5,className:"searchBoxContainer"},Object(D.d)(w.b,{previousElementId:"sortOrder",nextElementId:"new-thread-btn",animateFromSearch:function animateFromSearch(){return null},animateToSearch:function animateToSearch(){return null},onSubmit:function onSubmit(){return null}})),Object(D.d)(P.a,{item:!0,xs:12,sm:3,className:"newThreadButtonContainer"},Object(D.d)(C.b,null))),Object(D.d)(P.a,{container:!0,item:!0,style:{maxWidth:"650px",padding:o.spacing(32,0,0,0)}},n))}var q=function(e){a()(DiscussionsBody,e);var t=DiscussionsBody.prototype;function DiscussionsBody(t,r){var n;return n=e.call(this,t,r)||this,!t.isSessionsFilterStoreSetup&&t.hasModerationRole&&r.executeAction(y.a,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),t.isSessionsFilterStoreSetup||t.hasModerationRole||r.executeAction(y.b,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),n}return t.getChildContext=function getChildContext(){return{fluxibleContext:this.context.fluxibleContext||this.props.fluxibleContext}},t.renderSearchResults=function renderSearchResults(){var e=this.props,t=e.searchPage,r=e.q;return Object(D.d)(SearchBarCoreLayout,null,Object(D.d)(v.a,{query:r,page:t,currentForumUrl:this.context.currentForumUrl,currentForum:this.context.currentForum,pathname:this.context.pathName}))},t.renderThreadsList=function renderThreadsList(){var e=this,t=this.props,r=t.hasModerationRole,n=t.listPage,o=t.listSort,a=t.listAnswered;return Object(D.d)(SearchBarCoreLayout,null,Object(D.d)(S.a,{ref:function ref(t){e.threadsList=t},hasModerationRole:r,sort:o,answered:a,page:n}))},t.renderThreadDetail=function renderThreadDetail(){var e=this.props.courseId,t=this.props,r=t.questionId,n=t.answerId,o=t.commentId,a=t.detailPage,i=t.detailSort;return Object(D.d)(E.a,{answerId:n,commentId:o,questionId:r,courseId:e,forumQuestionId:r,sort:i,page:a})},t.render=function render(){var e=this.props.q,t=this.props,r=t.role,o=t.questionId;return Object(D.d)("div",n()({className:b()("rc-personalization_DiscussionsBody","styleguide",this.props.className),id:"discussions-tabpanel","aria-label":T()("Discussions")},r?{role:r}:{}),o&&this.renderThreadDetail(),!o&&(e?this.renderSearchResults():this.renderThreadsList()))},DiscussionsBody}(d.a.Component);function booleanOrUndefinedFromString(e){if(/true/i.test(e))return!0;if(/false/i.test(e))return!1;return}q.contextTypes={router:u.a.object.isRequired,fluxibleContext:u.a.object,executeAction:u.a.func.isRequired},q.childContextTypes={fluxibleContext:u.a.object},q.defaultProps={detailSort:g.f.detailSort,detailPage:g.f.detailPage,listSort:g.f.listSort,listAnswered:g.f.listAnswered,listPage:g.f.listPage};var R=function getPropsFromRouter(e,t){var r=e.params,n=e.location.query,o=r.question_id||t.questionId,a=n.page?parseInt(n.page,10):1,i={answerId:r.answer_id||t.answerId,questionId:o,commentId:r.comment_id||t.commentId,sort:n.sort,answered:booleanOrUndefinedFromString(n.answered),page:a};return o?Object.assign(i,{detailSort:n.sort,detailAnswered:n.answered,detailPage:a}):n.q?Object.assign(i,{q:n.q,searchPage:a}):Object.assign(i,{listSort:n.sort,listAnswered:n.answered,listPage:a}),i},A=Object(p.compose)(Object(O.a)(["SessionFilterStore","SessionStore","CourseStore","CourseMembershipStore","ApplicationStore"],function(e){var t=e.SessionFilterStore,r=e.SessionStore,n=e.CourseStore,o=e.CourseMembershipStore,a=e.ApplicationStore;return{hasModerationRole:o.hasModerationRole()||a.isSuperuser(),isSessionsFilterStoreSetup:t.filtersLoaded,currentSessionId:r.isEnrolled()?r.getSessionId():void 0,courseId:n.getCourseId(),isPrivateSession:!!r.isEnrolled()&&r.isSessionPrivate()}}),Object(I.a)(R),f.a.createTrackedContainer(function(e){return{sort:e.sort,answered:e.answered,page:e.page}}))(q),k=function(e){function FluxibleConnectedDiscussionsBody(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).fluxibleContext=void 0,t}a()(FluxibleConnectedDiscussionsBody,e);var t=FluxibleConnectedDiscussionsBody.prototype;return t.componentWillMount=function componentWillMount(){var e=this.context.fluxibleContext;this.fluxibleContext=Object(x.a)(e)},t.render=function render(){var e;return Object(D.d)(j.a,{context:null===(e=this.fluxibleContext)||void 0===e?void 0:e.getComponentContext()},Object(D.d)(A,this.props))},FluxibleConnectedDiscussionsBody}(d.a.Component);k.contextTypes={fluxibleContext:u.a.object}},yMcb:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("VkAN"),a=t.n(o),i=t("q1tI"),s=t.n(i),c=t("17x9"),u=t.n(c),l=t("MnCE"),d=t("W1i5"),p=t("2BcA"),m=t("sBaw"),h=t("OrSE"),b=t("ju0T"),f=t("JVW9"),g=t("BVC1"),S=t("+LJP"),v=t("8cuT"),y=t("EdUP"),O=t("GqWO"),I=t("ii1C"),j=t("5+aF"),x=t("kvW3"),F=t("GP6s"),T=t.n(F),E=t("N43y"),w=t.n(E),C=t("763+"),N=t("8Hdl"),P=t("AeFk");function _templateObject(){var e=a()(["\n  .back-area {\n    margin: ",";\n    display: inline-block;\n    .back-label {\n      display: inline-block;\n      margin: ",";\n    }\n    .back-arrow {\n      display: inline-block;\n      padding-left: ",";\n      margin-left: ",";\n      transition: all 0.1s ease-in-out;\n      .back-arrow-image {\n        margin-bottom: ",";\n        height: 12px;\n        width: 12px;\n      }\n    }\n    &hover {\n      .back-arrow {\n        padding-left: 0;\n        padding-right: ",";\n        transition: all 0.1s ease-in-out;\n      }\n    }\n  }\n  .results-metadata {\n    padding: ",";\n    line-height: 28px;\n    letter-spacing: -0.1px;\n    color: ",";\n    border-bottom: 1px solid ",";\n    .search-course-link {\n      text-decoration: underline;\n    }\n  }\n  .rc-SearchResultEntry {\n    cursor: pointer;\n    border-bottom: 1px solid ",";\n    list-style-type: none;\n    .c-result-title {\n      margin-bottom: ",";\n      font-weight: bold;\n    }\n    &hover {\n      .c-result-title {\n        text-decoration: underline;\n      }\n    }\n    &last-child {\n      border-bottom: none;\n    }\n  }\n  .rc-ListBody {\n    padding: 0;\n  }\n"]);return _templateObject=function _templateObject(){return e},e}var D=function styles(e){return Object(P.c)(_templateObject(),e.spacing(8,0,12),e.spacing(0,8),e.spacing(0,4),e.spacing(0,8),e.spacing(0,4),e.spacing(0,4),e.spacing(0,0,8,0),e.palette.black,e.palette.gray[300],e.palette.gray[300],e.spacing(4))},q=function RenderPropsTheme(e){var t,r;return(0,e.children)({theme:Object(C.a)()})},R=function(e){function SearchResults(t,r){var n,o;((n=e.call(this,t,r)||this).handleQueryChange=function(e){n.setState({query:e})},n.handleSearchCourse=function(e){var t=n.state.query,r=n.props.rootPath,o=n.context.router;e.preventDefault();var a=g.a.join(null!=r?r:[],"discussions/all");o.push({pathname:a,params:{},query:{q:t}})},n.onPageChange=function(e){var t=n.props,r=t.query,o=t.currentForum,a=t.contextId,i=t.hasModerationRole,s=n.context,c=s.router,u=s.executeAction;c.push({pathname:c.location.pathname,params:{},query:Object.assign(c.location.query,{page:e})}),u(m.a.goToPage,{query:r,pageNum:e,forumId:o.forumId,filterQueryString:n.props.filterQueryString,contextId:a,forumType:o.forumType.typeName,includeDeleted:i})},n.submitSearch=function(){var e=n.state.query,t=n.context.router;if(e){var r=e.replace("*","");t.push({pathname:window.location.pathname,params:{},query:{q:r}})}},n.navigateBack=function(e){var t=n.context.router,r=n.props.currentForumUrl;e.preventDefault(),t.push(r)},n.state={query:t.query||""},t.query)&&(0,n.context.executeAction)(m.a.search,{query:t.query,filterQueryString:t.filterQueryString,pageNum:t.page,forumId:t.currentForum.forumId,contextId:t.contextId,forumType:t.currentForum.forumType.typeName,reset:!0,includeDeleted:t.hasModerationRole});return n}n()(SearchResults,e);var t=SearchResults.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,r=t.query,n=t.pathname,o=t.currentForum,a=t.filterQueryString,i=t.page,s=this.context.executeAction;e.query===r&&e.pathname===n&&e.currentForum.id===o.id&&e.filterQueryString===a||(this.setState({query:e.query}),s(m.a.search,{query:e.query,filterQueryString:e.filterQueryString,pageNum:i,forumId:e.currentForum.forumId,contextId:e.contextId,forumType:e.currentForum.forumType.typeName,reset:a!==e.filterQueryString,includeDeleted:e.hasModerationRole}))},t.render=function render(){var e=this,t=this.props,r=t.currentForum,n=t.currentForumUrl,o=t.loadingState,a=t.numResults,i=t.currentResults,c=t.page,u=t.pageCount,l=t.query,d=t.rootForumId,m=t.rootPath,S=this.context.router,v=S.isActive({pathname:Object(O.c)()}),y=r.title,I=null==d?void 0:d.substr(d.indexOf("~")+1),j=g.a.join(null!=m?m:[],"discussions/forums/".concat(I)),F,E,w=/discussions\/(forums|weeks|groups)\//i.test(S.location.pathname)?n:j,C,P;C=o===p.i.DONE?a&&a>1?T()("#{numResults} Discussions",{numResults:a}):T()("#{numResults} Discussion",{numResults:a}):T()("Finding search results in #{displayName}",{displayName:y});var R=s.a.createElement("div",{className:"results-metadata"},s.a.createElement(N.a,{variant:"h2semibold","aria-live":"polite"},o===p.i.DONE?s.a.createElement("span",null,C):s.a.createElement(x.b,{message:T()("Finding search results in {displayName}"),displayName:y})));return o===p.i.DONE&&i.length>0&&(P=i.map(function(e,t){return s.a.createElement(b.a,{page:c,query:l,forumLink:w||"",entry:e,index:t,key:e.id})})),s.a.createElement(q,null,function(t){var r=t.theme;return s.a.createElement("div",{className:"rc-personalization__DiscussionsSearchResults",css:D(r)},!v&&R,s.a.createElement(h.a,{loadingState:o},P),s.a.createElement(f.a,{style:{textAlign:"center"},onClickHandler:e.onPageChange,pageCount:u||1,currentPage:c,maxPages:5}))})},SearchResults}(s.a.Component);R.contextTypes={executeAction:u.a.func.isRequired,router:u.a.object.isRequired},e.a=Object(l.compose)(Object(S.a)(function(e){return{query:decodeURIComponent(e.location.query.q),pathname:e.location.pathname}}),Object(j.a)({fields:["title","link","forumType"]}),Object(S.a)(I.a),Object(v.a)(["DiscussionsSearchStore","SessionFilterStore"],function(e,t){var r=e.DiscussionsSearchStore,n=e.SessionFilterStore,o=t.currentForum.forumId;return{filterQueryString:n.activeFilterQueryString,currentResults:r.searchResults({forumId:o,query:t.query,pageNum:r.currentPage}),loadingState:r.loadingState,pageCount:r.getPageCount({forumId:o,query:t.query}),numResults:r.getNumResults({forumId:o,query:t.query})}}),Object(d.a)(function(e){var t=e.courseForums&&e.courseForums.find(function(e){return e.forumType.typeName===p.j.rootForumType});return{forums:e.courseForums?e.courseForums.filter(function(e){return e.forumType.typeName!==p.j.rootForumType}).concat(e.mentorForums).concat(e.groupForums):[],rootForumId:t&&t.id}}),Object(y.a)(function(e){return e.currentForum}))(R);var A=R},zfwB:function(module,e,t){"use strict";var r=t("RYD2"),n=t("oRWh");t.d(e,"a",function(){return n.a});var o=r.a},zwd1:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("AeFk"),a=t("F/us"),i=t.n(a),s=t("17x9"),c=t.n(s),u=t("q1tI"),l=t.n(u),d=t("sQ/U"),p=t("AgXR"),m=t("ZJgU"),h=t("8xbv"),b=t("q5zD"),f=t("8cuT"),g=t("GP6s"),S=t.n(g),v=t("hSS9"),y=t.n(v);function SubscribeButton(e){var t=e.onClick,r=e.disabled,n=e.className,a=e.ariaLabel,i=e.isSubscriptionInProgress,s=e.isSubscribed,c=e.subscription,u=s?S()("Unsubscribe"):S()("Subscribe"),l,d=!i&&null===c?S()("Error"):u;if(i)return Object(o.d)(b.a,{name:"spinner",className:"cif-spin"});return Object(o.d)(m.a,{className:n,type:"button",size:"small",variant:"ghost","aria-label":a,onClick:t,disabled:!c,icon:i&&Object(o.d)(h.a,{size:"small"}),iconPosition:i&&"after"},d)}var O=function(e){function ForumsV2SubscriptionButton(t,r){var n;return(n=e.call(this,t,r)||this).toggleSubscription=function(){var e=n.props,t=e.isSubscribed,r=e.forumType,o=e.subscription,a=e.forumSubscriptionId;t?(n.context.executeAction(p.b,{subscription:o,forumSubscriptionId:a,forumType:r}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(p.a,{forumType:r,forumSubscriptionId:a}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will receive emails whenever new threads are added.")}))},n.state={subscriptionDetails:{},showSubscriptionDetails:!1},n}n()(ForumsV2SubscriptionButton,e);var t=ForumsV2SubscriptionButton.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,n=e.hasError,a=e.isSubscriptionInProgress,i=this.state,s=i.showSubscriptionDetails,c=i.subscriptionDetails;return Object(o.d)("div",{className:"rc-ForumsV2__SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},Object(o.d)(SubscribeButton,{className:"subscription-button",ariaLabel:S()("Button"),onClick:this.toggleSubscription,disabled:!t,isSubscriptionInProgress:a,subscription:t,isSubscribed:r}),!n&&s&&Object(o.d)("div",{className:"message caption-text"},c),n&&Object(o.d)("div",{className:"errorMessage"},S()("Sorry, something went wrong. Try again.")),s&&Object(o.d)("span",{className:"screenreader-only","aria-live":"polite"},t&&!a&&r?S()("Subscribed, You will receive emails whenever new threads are added."):S()("Unsubscribed, You will no longer receive emails whenever new threads are added.")))},ForumsV2SubscriptionButton}(l.a.Component);O.contextTypes={executeAction:c.a.func.isRequired},e.a=i.a.compose(Object(f.a)(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,t){var r=e.SubscriptionStore,n=null==t?void 0:t.forumId,o=n&&n.split("~"),a=n&&"".concat(d.a.get().id,"~").concat(o[0],"~").concat(o[1]),i=d.a.isAuthenticatedUser();return{forumSubscriptionId:a,hasError:r.hasError(),subscription:i&&!r.hasError()?r.getSubscription(a):null,isSubscribed:i&&!r.hasError()?r.getIsSubscribed(a):null,isSubscriptionInProgress:i&&!r.hasError()?r.getIsSubscriptionInProgress(a):null}}))(O)}}]);
//# sourceMappingURL=10.9d926ce38355e6d0caed.js.map